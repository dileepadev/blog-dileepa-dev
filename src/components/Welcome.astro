---
// Welcome component for the blog home page
const modules = import.meta.glob("../content/posts/**/*.mdx", { eager: true });

const posts = Object.entries(modules)
  .map(([path, mod]) => {
    const m = mod as any;
    const slug =
      path
        .split("/")
        .pop()
        ?.replace(/\.mdx$/, "") ?? "";
    return {
      slug,
      ...(m.frontmatter || {}),
    };
  })
  .sort(
    (a, b) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime(),
  );

const latestPost = posts[0];

function formatDate(date: string) {
  return new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
}
---

<div class="w-full py-20 px-4">
  <div class="max-w-4xl mx-auto text-center">
    <!-- Main Heading -->
    <h1 class="text-5xl md:text-7xl font-bold text-text mb-6 animate-fade-in">
      Welcome to my dev blog
    </h1>

    <!-- Description -->
    <p class="text-lg text-text-tertiary mb-8 max-w-3xl mx-auto">
      Dive into insightful tutorials, cutting-edge projects, and
      thought-provoking discussions about the technologies shaping our future.
    </p>

    <!-- Topic Chips -->
    <p
      class="text-xl md:text-2xl text-text-secondary mb-4 max-w-2xl mx-auto leading-relaxed"
    >
      <span
        class="font-semibold text-lg inline-flex items-center px-3 py-1 rounded-full bg-card-bg border border-border text-text-secondary transition-colors"
        >Artificial Intelligence</span
      >
      <span
        class="font-semibold text-lg inline-flex items-center px-3 py-1 rounded-full bg-card-bg border border-border text-text-secondary transition-colors"
        >Cloud Computing</span
      >
      <span
        class="font-semibold text-lg inline-flex items-center px-3 py-1 rounded-full bg-card-bg border border-border text-text-secondary transition-colors"
        >Software Development</span
      >
    </p>
  </div>
</div>

<!-- Divider -->
<div
  class="my-1 flex items-center justify-center"
  role="separator"
  aria-hidden="false"
>
  <span class="h-px w-1/3 bg-border" aria-hidden="true"></span>
  <span class="mx-4 text-xl text-text-secondary" aria-hidden="true">âœ¦</span>
  <span class="h-px w-1/3 bg-border" aria-hidden="true"></span>
</div>

<!-- Latest Blog Section -->
<div class="w-full py-16 px-4">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-3xl font-bold text-text mb-8 text-center">
      Latest Blog Post <span class="ml-2" aria-hidden="true">ðŸš€</span>
    </h2>

    <div class="bg-card-bg border border-border rounded-xl p-8 shadow-sm">
      {
        latestPost ? (
          <div class="text-left">
            <div class="flex items-center gap-2 text-lg text-text-tertiary mb-3">
              <span>{formatDate(latestPost.pubDate)}</span>
              {latestPost.tags && (
                <>
                  <span>â€¢</span>
                  <div class="flex gap-2">
                    {latestPost.tags.map((tag: string) => (
                      <span class="capitalize bg-background px-2 py-0.5 rounded text-sm">
                        {tag}
                      </span>
                    ))}
                  </div>
                </>
              )}
            </div>
            <h3 class="text-2xl font-bold text-text mb-3 hover:text-primary transition-colors">
              <a href={`/blog/${latestPost.slug}`}>{latestPost.title}</a>
            </h3>
            <p class="text-text-secondary mb-6 line-clamp-3">
              {latestPost.description}
            </p>
            <a
              href={`/blog/${latestPost.slug}`}
              class="text-primary font-medium hover:underline inline-flex items-center gap-1"
            >
              Read Article â†’
            </a>
          </div>
        ) : (
          <div class="text-center">
            <p class="text-lg text-text-secondary mb-4">Coming soon...</p>
            <p class="text-text-tertiary mb-6">
              I'm working on some exciting articles. Stay tuned for the latest
              insights on AI, cloud computing, and software development!
            </p>
          </div>
        )
      }
    </div>
  </div>
</div>
