---

---

<div class="mt-4 md:mt-6">
  <div
    id="share-panel"
    class="mt-2 flex items-center gap-2 flex-wrap w-full sm:w-auto"
    role="group"
    aria-label="Share post"
  >
    <p>Share this post</p>

    <button
      id="share-copy"
      class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-bg-tertiary dark:bg-bg-elevated text-text-primary border border-border-light text-sm transition-all duration-150 ease-in-out transform hover:scale-105 hover:bg-accent-blue/10 dark:hover:bg-accent-blue-light/20 hover:text-on-accent focus:outline-none focus:ring-2 focus:ring-accent-blue/20"
      title="Copy link"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        ><path
          fill="currentColor"
          d="m7.775 3.275l1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0a.75.75 0 0 1 .018-1.042a.75.75 0 0 1 1.042-.018a2 2 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.75.75 0 0 1-1.042-.018a.75.75 0 0 1-.018-1.042m-4.69 9.64a2 2 0 0 0 2.83 0l1.25-1.25a.75.75 0 0 1 1.042.018a.75.75 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0a.75.75 0 0 1-.018 1.042a.75.75 0 0 1-1.042.018a2 2 0 0 0-2.83 0l-2.5 2.5a2 2 0 0 0 0 2.83"
        ></path></svg
      >
    </button>

    <button
      id="share-twitter"
      class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-bg-tertiary dark:bg-bg-elevated text-text-primary border border-border-light text-sm transition-all duration-150 ease-in-out transform hover:scale-105 hover:bg-accent-blue/10 dark:hover:bg-accent-blue-light/20 hover:text-on-accent focus:outline-none focus:ring-2 focus:ring-accent-blue/20"
      title="Share on Twitter"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 512 512"
        ><path
          fill="currentColor"
          d="M389.2 48h70.6L305.6 224.2L487 464H345L233.7 318.6L106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"
        ></path></svg
      >
    </button>

    <button
      id="share-linkedin"
      class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-bg-tertiary dark:bg-bg-elevated text-text-primary border border-border-light text-sm transition-all duration-150 ease-in-out transform hover:scale-105 hover:bg-accent-blue/10 dark:hover:bg-accent-blue-light/20 hover:text-on-accent focus:outline-none focus:ring-2 focus:ring-accent-blue/20"
      title="Share on LinkedIn"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 448 512"
        ><path
          fill="currentColor"
          d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3M447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2c-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3c94 0 111.28 61.9 111.28 142.3V448z"
        ></path></svg
      >
    </button>

    <button
      id="share-email"
      class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-bg-tertiary dark:bg-bg-elevated text-text-primary border border-border-light text-sm transition-all duration-150 ease-in-out transform hover:scale-105 hover:bg-accent-blue/10 dark:hover:bg-accent-blue-light/20 hover:text-on-accent focus:outline-none focus:ring-2 focus:ring-accent-blue/20"
      title="Share via Email"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        ><path
          fill="currentColor"
          d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-.4 4.25l-7.07 4.42c-.32.2-.74.2-1.06 0L4.4 8.25a.85.85 0 1 1 .9-1.44L12 11l6.7-4.19a.85.85 0 1 1 .9 1.44"
        ></path></svg
      >
    </button>

    <div
      id="share-status"
      class="ml-2 text-sm text-text-secondary"
      aria-live="polite"
    >
    </div>
  </div>
</div>

<script>
  // Encapsulated share logic for this component (safe checks)
  const shareNative = document.getElementById("share-native");
  const shareCopy = document.getElementById("share-copy");
  const shareTwitter = document.getElementById("share-twitter");
  const shareLinkedIn = document.getElementById("share-linkedin");
  const shareEmail = document.getElementById("share-email");
  const shareStatus = document.getElementById("share-status");

  function getPageData() {
    return {
      title: document.title || document.querySelector("h1")?.textContent || "",
      url: window.location.href,
    };
  }

  if (!navigator.share && shareNative) {
    (shareNative as HTMLElement).style.display = "none";
  }

  if (shareNative) {
    shareNative.addEventListener("click", async () => {
      const data = getPageData();
      try {
        await navigator.share({ title: data.title, url: data.url });
        if (shareStatus) shareStatus.textContent = "Shared successfully";
      } catch (err) {
        if (shareStatus) shareStatus.textContent = "Share canceled";
      }
      setTimeout(() => {
        if (shareStatus) shareStatus.textContent = "";
      }, 2000);
    });
  }

  if (shareCopy) {
    shareCopy.addEventListener("click", async () => {
      const data = getPageData();
      try {
        await navigator.clipboard.writeText(data.url);
        if (shareStatus) shareStatus.textContent = "Link copied to clipboard";
      } catch (err) {
        if (shareStatus) shareStatus.textContent = "Failed to copy";
      }
      setTimeout(() => {
        if (shareStatus) shareStatus.textContent = "";
      }, 2000);
    });
  }

  if (shareTwitter) {
    shareTwitter.addEventListener("click", () => {
      const data = getPageData();
      const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(data.title)}&url=${encodeURIComponent(data.url)}`;
      window.open(url, "_blank", "noopener");
    });
  }

  if (shareLinkedIn) {
    shareLinkedIn.addEventListener("click", () => {
      const data = getPageData();
      const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(data.url)}`;
      window.open(url, "_blank", "noopener");
    });
  }

  if (shareEmail) {
    shareEmail.addEventListener("click", () => {
      const data = getPageData();

      const subject = encodeURIComponent(data.title);
      const body = encodeURIComponent(
        `I thought you might enjoy this post:\n\n${data.url}`,
      );

      window.location.href = `mailto:?subject=${subject}&body=${body}`;
    });
  }
</script>
